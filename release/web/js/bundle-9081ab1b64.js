(()=>{var e,t,i,s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,n=(e,t,i,n)=>{for(var o,l=n>1?void 0:n?a(t,i):t,d=e.length-1;d>=0;d--)(o=e[d])&&(l=(n?o(t,i,l):o(l))||l);return n&&l&&s(t,i,l),l},o=(e,t,i)=>new Promise((s,a)=>{var n=e=>{try{l(i.next(e))}catch(e){a(e)}},o=e=>{try{l(i.throw(e))}catch(e){a(e)}},l=e=>e.done?s(e.value):Promise.resolve(e.value).then(n,o);l((i=i.apply(e,t)).next())});!function(e){e.load_progress="load_progress",e.update_field="update_field",e.update_Order="update_Order",e.land_speed_up="land_speed_up",e.login_game="login_game",e.login_out="login_out",e.play_get_reward="play_get_reward"}(e||(e={})),function(e){e.AddLandView="scenes/views/AddLandView.scene",e.FieldLevelUpView="scenes/views/FieldLevelUpView.scene",e.FriendsDescView="scenes/views/FriendsDescView.scene",e.FriendsRewardView="scenes/views/FriendsRewardView.scene",e.FriendsView="scenes/views/FriendsView.scene",e.HintView="scenes/views/HintView.scene",e.LoginView="scenes/views/LoginView.scene",e.MailView="scenes/views/MailView.scene",e.MainView="scenes/views/MainView.scene",e.OrderView="scenes/views/OrderView.scene",e.SettingView="scenes/views/SettingView.scene",e.ShopView="scenes/views/ShopView.scene",e.SignInView="scenes/views/SignInView.scene",e.SpeedUpView="scenes/views/SpeedUpView.scene",e.TaskView="scenes/views/TaskView.scene",e.WarehouseView="scenes/views/WarehouseView.scene"}(t||(t={})),function(e){(i||(i={})).button_click="res/audio/button_click.mp3"}();var l={views:t,scenes:["scenes/views/WarehouseView.scene","scenes/views/TaskView.scene","scenes/views/SpeedUpView.scene","scenes/views/SignInView.scene","scenes/views/ShopView.scene","scenes/views/SettingView.scene","scenes/views/OrderView.scene","scenes/views/MainView.scene","scenes/views/MailView.scene","scenes/views/LoginView.scene","scenes/views/HintView.scene","scenes/views/FriendsView.scene","scenes/views/FriendsRewardView.scene","scenes/views/FriendsDescView.scene","scenes/views/FieldLevelUpView.scene","scenes/views/AddLandView.scene","scenes/prefab/GetReward.prefab","scenes/prefab/FloatRewardIcon.prefab","scenes/prefab/FieldPrefab.prefab","scenes/components/Button.prefab","res/loadingBg.png","res/img_woodtitle.png","res/img_storeHouseBg.png","res/img_storebg.png","res/img_shelf.png","res/img_popUpBg.png","res/img_landBg.png","res/img_inviteBg1.png","res/img_housetop.png","res/img_homepageBg3.png","res/img_homepageBg2.png","res/img_homepageBg1.png","res/img_farmlandLogo.png","res/shader/vs.vs","res/shader/ps.fs","res/audio/button_click.mp3","res/atlas/plant_icon.png","res/atlas/plant_icon.atlas","res/atlas/pet_feed.png","res/atlas/pet_feed.atlas","res/atlas/main_scene1.png","res/atlas/main_scene.png","res/atlas/main_scene.atlas","res/atlas/game.png","res/atlas/game.atlas"],audios:i},d=new Laya.EventDispatcher,c=new Map;var r=new Map;var h=d,m=new Map,u=new class{constructor(){this.keyEvents=new Map}watch(e,t){m.has(t)||m.set(t,[]);let i=this.keyEvents;i.has(e)||i.set(e,new Map);const s=(a,n)=>{let o=i.get(e);return o.has(a)||(o.set(a,[]),null==e["#"+a]&&(e["#"+a]=e[a],Object.defineProperty(e,a,{configurable:!1,enumerable:!1,set:function(e){this["#"+a]=e,o.get(a).forEach(t=>{t(e)})},get:function(){return this["#"+a]}}))),o.get(a).push(n),m.get(t).push(n),n(e[a]),{key:s}};return{key:s}}removeByCaller(e,t=null){var i;null==(i=m.get(e))||i.forEach(e=>{var i,s;t?null==(i=this.keyEvents)||i.get(t).forEach(t=>{let i=t.indexOf(e);i>-1&&t.splice(i,1)}):null==(s=this.keyEvents)||s.forEach(t=>{t.forEach(t=>{let i=t.indexOf(e);i>-1&&t.splice(i,1)})})})}},p=class extends Laya.Script{constructor(){super();let e=c.get(this.constructor.prototype);null==e||e.forEach(e=>{h.on(e.key,this,e.fn)})}onAwake(){var e;null==(e=r.get(this.constructor.prototype))||e.forEach(e=>{this[e]=this.owner.getChildByName(e)}),this.onHdAwake()}onOpened(e){}onHdAwake(){}onEnable(){this.onHdEnable()}onHdEnable(){}onStart(){this.onHdStart()}onHdStart(){}onUpdate(){this.onHdUpdate()}onHdUpdate(){}onDisable(){this.onHdDisable()}onHdDisable(){}onDestroy(){h.offAllCaller(this),this.onHdDestroy(),Laya.timer.once(1,null,()=>{u.removeByCaller(this);let e=Object.getOwnPropertyNames(this);for(let t=0,i=e.length;t<i;t++)this[e[t]]=null})}onHdDestroy(){}},g=class extends p{constructor(){super(...arguments),this.bg=null,this.content=null,this.tweenList=[]}doOpen(){}doClose(){}onEnable(){let e=this.owner;switch(this.bg.alpha=0,this.tweenList.push(Laya.Tween.to(this.bg,{alpha:.75},100,null,Laya.Handler.create(this,this.doOpen,[e]),0,!1,!1)),this.aniType){case"scaleShow":this.content.scale(1,1),this.tweenList.push(Laya.Tween.from(this.content,{x:Laya.stage.width/2,y:Laya.stage.height/2,scaleX:0,scaleY:0},300,Laya.Ease.backOut,Laya.Handler.create(this,this.doOpen,[e]),0,!1,!1));break;default:this.content.bottom=-this.content.height,this.tweenList.push(Laya.Tween.to(this.content,{bottom:0},300,Laya.Ease.circOut,Laya.Handler.create(this,this.doOpen,[e]),0,!1,!1))}}closeView(){let e=this.owner;return new Promise(t=>{switch(this.tweenList.push(Laya.Tween.to(this.bg,{alpha:0},200,null,Laya.Handler.create(this,this.doOpen,[e]),0,!1,!1)),this.aniType){case"scaleShow":this.tweenList.push(Laya.Tween.to(this.content,{x:Laya.stage.width/2,y:Laya.stage.height/2,scaleX:.5,scaleY:.5,alpha:0},150,null,new Laya.Handler(this,()=>{this.doClose(),t(null)},[e]),0,!1,!1));break;default:this.tweenList.push(Laya.Tween.to(this.content,{bottom:-this.content.height},200,null,new Laya.Handler(this,()=>{this.doClose(),t(null)},[e]),0,!1,!1))}})}onDisable(){this.tweenList.forEach(e=>{Laya.Tween.clear(e)}),this.tweenList.length=0}},w=new Map,v=100;function Instance(e,t){w.has(e["#instanceId"])||(v++,e["#instanceId"]=v,w.set(v,new e)),e[t]=w.get(v)}var y=[],b=class{loginOut(){y.forEach(e=>{e.view.getComponents(Laya.Script).forEach(e=>{Laya.timer.clearAll(e),e.destroy()}),this.closeViewLog(e.view.url,!0),e.view.destroy(!0)}),y.length=0}open(e,t={closeOther:!1,showLoad:!1,showLoadDelay:100,hideLoadDelay:0}){e?(t.showLoad&&(Laya.View.showLoadingPage(null,t.showLoadDelay),e!==l.views.LoginView&&Laya.timer.frameOnce(1,this,()=>{Laya.View.hideLoadingPage(t.hideLoadDelay)})),t.closeOther=!1,Laya.View.open(e,t.closeOther,t.parm,Laya.Handler.create(this,i=>{e!=l.views.LoginView&&y.push({url:e,view:i});let s=i.getComponents(Laya.Script);s&&s.forEach(e=>e.enabled&&e.onOpened&&e.onOpened(t.parm)),t.complete&&t.complete(i),console.log(`%c ==> open %c${e.match(/\w+(?=\.)/)[0]} `,"color:#7ed6df;font-weight:700;background-color:#dff9fb","color:#22a6b3;font-weight:700;background-color:#dff9fb")}),t.progress)):console.warn("miss path!")}close(e){return o(this,arguments,function*(e,t=!1,i=!1,s=g){let a;for(let i=y.length-1;i>-1;i--)if(e===y[i].url){let n=y[i];if(y.splice(i,1),(a=n.view.getComponent(s))?a.closeView().then(()=>{n.view.destroy(!0),this.closeViewLog(e,!0)}):(n.view.destroy(!0),this.closeViewLog(e,!0)),e===l.views.HintView)return;if(!t)break}if(!y.length)return;let n=0;for(let e=y.length-1;e>-1;e--)y[e].view.parent||n++;n===y.length&&(y.length=0,this.open(l.views.MainView)),console.log(y)})}closeViewLog(e,t=!1){console.log(`%c <== ${t?"destroy":"disable"} %c${e.match(/\w+(?=\.)/)[0]} `,"color:#ff7979;font-weight:700;background-color:#dff9fb","color:#eb4d4b;font-weight:700;background-color:#dff9fb")}openHint(e){this.open(l.views.HintView,{parm:e})}clearViewMaps(){y.length=0}};n([Instance],b,"inst",2);var _={observableProperty:u,view:b.inst,gameScript:p,instance:Instance,eventOn:function(e){return(t,i,s)=>{c.get(t)||c.set(t,[]),c.get(t).push({key:e,fn:s.value})}},findByName:function(e,t){r.has(e)||r.set(e,[]),r.get(e).push(t)},eventGlobal:h,audio:new class{playSound(e,t,i,s,a){Laya.SoundManager.playSound(e,t,i,s,a)}set soundMuted(e){Laya.SoundManager.soundMuted=e}get soundMuted(){return Laya.SoundManager.soundMuted}set musicMuted(e){Laya.SoundManager.musicMuted=e}get musicMuted(){return Laya.SoundManager.musicMuted}}},L=class extends Laya.Script{constructor(){super(...arguments),this.isScale=!1,this.scaleVal=.9}onEnable(){this.owner.mouseEnabled=!0,this.oldScaleX=this.owner.get_scaleX(),this.oldScaleY=this.owner.get_scaleY()}onClick(){_.audio.playSound(l.audios.button_click)}onMouseDown(){this.setSkin(this.downRes),this.setAni(this.scaleVal)}onMouseOut(){this.setSkin(this.defaultRes),this.setAni(1)}onMouseUp(){this.setSkin(this.defaultRes),this.setAni(1)}setAni(e){this.isScale&&Laya.Tween.to(this.owner,{scaleX:e*this.oldScaleX,scaleY:e*this.oldScaleY},300,Laya.Ease.backOut,null,0,!1,!1)}setSkin(e){e&&(this.owner.skin=e)}onDisable(){}},k={diamondId:1001,goldId:1002,petDigestIntervalTime:60,localKey:"love_HD_farm",baseUrl:"http://game.ahd168.com:3000",ApiTypeDefault:1,ApiTypeAD:2,ADSpeedUpTimes:6},f={isLogin:!1,token:null,sound:!1,music:!1},S=new class{constructor(){this.localData=f}init(){this.localData=Laya.LocalStorage.getJSON(k.localKey)||f}getJSON(){return this.localData}setJSON(e,t){this.localData[e]=t,Laya.LocalStorage.setJSON(k.localKey,this.localData)}clear(){Laya.LocalStorage.setJSON(k.localKey,{}),this.localData={isLogin:!1,token:null,sound:!0,music:!0}}},I={task:[{id:1001,reward:"1001:50",times:1,title:"签到领钻石",desc:"看视频签到",icon:null},{id:1002,reward:"1001:100",times:10,title:"菜地施肥10次",desc:"菜地加速10次",icon:null},{id:1003,reward:"1001:50",times:10,title:"菜地收获10次",desc:"菜地收获10次",icon:null},{id:1004,reward:"1001:50",times:5,title:"访友5次",desc:"偷菜5次",icon:null},{id:1005,reward:"1001:20",times:3,title:"喂养狗狗3次",desc:"喂养狗狗3次",icon:null},{id:1006,reward:"1001:20",times:5,title:"购买饲料5次",desc:"购买饲料5次",icon:null},{id:1007,reward:"1001:20",times:10,title:"购买种子10次",desc:"购买种子10次",icon:null},{id:1008,reward:"1001:30",times:3,title:"出售作物3次",desc:"出售作物3次",icon:null},{id:1009,reward:"1001:100",times:5,title:"添加好友",desc:"添加好友5个",icon:null},{id:1010,reward:"1001:50",times:1,title:"分享得好礼",desc:"分享一次",icon:null},{id:1011,reward:"1001:30",times:3,title:"指定种植",desc:"种植指定种子",icon:null},{id:1012,reward:"1001:50",times:10,title:"看视频",desc:"看视频10次",icon:null}],signIn:[{id:1001,days:7,reward:"1001:20000"},{id:1002,days:10,reward:"1001:30000"},{id:1003,days:15,reward:"1001:50000"},{id:1004,days:20,reward:"1001:80000"},{id:1005,days:30,reward:"1001:120000"},{id:1006,days:50,reward:"1001:180000"},{id:1007,days:80,reward:"1001:300000"},{id:1008,days:100,reward:"1001:350000"},{id:1009,days:150,reward:"1001:500000"}],plant:[{id:1001,name:"水稻",icon:"plant_icon/1002_seed.png",seed_price:"1002:50",gain:"1001:0,1002:50",harvest:"1~2",mature_time:"180",unlock_cost:null,unlock_reward:null,desc:"种下一粒种子，收获整个世界"},{id:1002,name:"大豆",icon:"plant_icon/1004_seed.png",seed_price:"1002:50",gain:"1001:0,1002:50",harvest:"1~2",mature_time:"180",unlock_cost:null,unlock_reward:null,desc:"种下一粒种子，收获整个世界"},{id:1003,name:"大蒜",icon:"plant_icon/1012_seed.png",seed_price:"1002:50",gain:"1001:0,1002:50",harvest:"1~2",mature_time:"240",unlock_cost:null,unlock_reward:null,desc:"种下一粒种子，收获整个世界"},{id:1004,name:"包心菜",icon:"plant_icon/1006_seed.png",seed_price:"1002:75",gain:"1001:0,1002:75",harvest:"1~2",mature_time:"300",unlock_cost:"1002:1000",unlock_reward:"1001:0,1002:0",desc:"种下一粒种子，收获整个世界"},{id:1005,name:"土豆",icon:"plant_icon/1007_seed.png",seed_price:"1002:75",gain:"1001:0,1002:75",harvest:"2~3",mature_time:"300",unlock_cost:"1002:1000",unlock_reward:"1001:0,1002:0",desc:"种下一粒种子，收获整个世界"},{id:1006,name:"萝卜",icon:"plant_icon/1005_seed.png",seed_price:"1002:75",gain:"1001:0,1002:75",harvest:"2~3",mature_time:"480",unlock_cost:"1002:1000",unlock_reward:"1001:0,1002:0",desc:"种下一粒种子，收获整个世界"},{id:1007,name:"小麦",icon:"plant_icon/1001_seed.png",seed_price:"1002:120",gain:"1001:0,1002:120",harvest:"2~3",mature_time:"480",unlock_cost:"1002:1500",unlock_reward:"1001:0,1002:0",desc:"种下一粒种子，收获整个世界"},{id:1008,name:"辣椒",icon:"plant_icon/1010_seed.png",seed_price:"1002:120",gain:"1001:0,1002:120",harvest:"2~3",mature_time:"600",unlock_cost:"1002:2000",unlock_reward:"1001:0,1002:0",desc:"种下一粒种子，收获整个世界"},{id:1009,name:"黄瓜",icon:"plant_icon/1011_seed.png",seed_price:"1002:200",gain:"1001:0,1002:200",harvest:"3~4",mature_time:"720",unlock_cost:"1002:3000",unlock_reward:"1001:0,1002:0",desc:"种下一粒种子，收获整个世界"},{id:1010,name:"茄子",icon:"plant_icon/1013_seed.png",seed_price:"1002:200",gain:"1001:0,1002:200",harvest:"3~4",mature_time:"720",unlock_cost:"1002:3500",unlock_reward:"1001:0,1002:0",desc:"种下一粒种子，收获整个世界"},{id:1011,name:"胡萝卜",icon:"plant_icon/1008_seed.png",seed_price:"1002:350",gain:"1001:0,1002:350",harvest:"3~4",mature_time:"900",unlock_cost:"1002:4500",unlock_reward:"1001:0,1002:0",desc:"种下一粒种子，收获整个世界"},{id:1012,name:"南瓜",icon:"plant_icon/1014_seed.png",seed_price:"1002:350",gain:"1001:0,1002:350",harvest:"3~4",mature_time:"900",unlock_cost:"1002:5000",unlock_reward:"1001:0,1002:0",desc:"种下一粒种子，收获整个世界"},{id:1013,name:"玉米",icon:"plant_icon/1003_seed.png",seed_price:"1002:500",gain:"1001:0,1002:500",harvest:"3~5",mature_time:"1200",unlock_cost:"1002:5500",unlock_reward:"1001:0,1002:0",desc:"种下一粒种子，收获整个世界"},{id:1014,name:"甘蔗",icon:"plant_icon/1015_seed.png",seed_price:"1002:500",gain:"1001:0,1002:500",harvest:"3~5",mature_time:"1200",unlock_cost:"1002:6000",unlock_reward:"1001:0,1002:0",desc:"种下一粒种子，收获整个世界"},{id:1015,name:"番茄",icon:"plant_icon/1009_seed.png",seed_price:"1002:500",gain:"1001:0,1002:500",harvest:"3~5",mature_time:"1200",unlock_cost:"1002:6500",unlock_reward:"1001:0,1002:0",desc:"种下一粒种子，收获整个世界"}],pet:[{id:1001,name:"旺财",icon:"pet_feed/1001_dog.png",vitality_max:100,vitality_consume:10,cost:"1002:3000",desc:"爱它就买它~它就是有点懒~",sensitive:34,ability:42},{id:1002,name:"汤圆",icon:"pet_feed/1007_dog.png",vitality_max:100,vitality_consume:15,cost:"1002:4000",desc:"颜值、智商双双在线",sensitive:40,ability:48},{id:1003,name:"肉干",icon:"pet_feed/1009_dog.png",vitality_max:100,vitality_consume:16,cost:"1002:4500",desc:"最忠诚的伙伴",sensitive:45,ability:55},{id:1004,name:"二哈",icon:"pet_feed/1002_dog.png",vitality_max:100,vitality_consume:16,cost:"1002:5000",desc:"绝不拆家！",sensitive:48,ability:60},{id:1005,name:"大眼睛",icon:"pet_feed/1005_dog.png",vitality_max:100,vitality_consume:17,cost:"1002:7000",desc:"活好吃的少",sensitive:50,ability:75},{id:1006,name:"小尾巴",icon:"pet_feed/1004_dog.png",vitality_max:100,vitality_consume:18,cost:"1002:7500",desc:"武力天赋已点满~拿捏！",sensitive:60,ability:80},{id:1007,name:"球球",icon:"pet_feed/1008_dog.png",vitality_max:100,vitality_consume:18,cost:"1002:8000",desc:"就两个字，听话！",sensitive:69,ability:85},{id:1008,name:"小白",icon:"pet_feed/1003_dog.png",vitality_max:100,vitality_consume:18,cost:"1002:8000",desc:"看家、看菜、看孩子",sensitive:76,ability:88},{id:1009,name:"点点",icon:"pet_feed/1006_dog.png",vitality_max:100,vitality_consume:19,cost:"1002:10000",desc:"你值得拥有！",sensitive:85,ability:93},{id:1010,name:"闷墩",icon:"pet_feed/1010_dog.png",vitality_max:100,vitality_consume:30,cost:"1002:15000",desc:"长得就很凶，抓小偷更凶",sensitive:90,ability:99}],order:[{id:1,commission:"0.5",condition:"1001:2"},{id:2,commission:"0.1",condition:"1001:1,1002:1,1003:1"},{id:3,commission:"0.03",condition:"1012:18,1004:4,1003:5,1005:6"},{id:4,commission:"0.24",condition:"1012:10,1003:3,1007:7,1015:9"},{id:5,commission:"0.61",condition:"1014:6,1012:9,1010:19,1006:4"},{id:6,commission:"0.07",condition:"1010:14,1004:2,1012:3,1001:8"},{id:7,commission:"0.43",condition:"1012:18,1001:11,1007:7,1008:19"},{id:8,commission:"0.56",condition:"1008:13,1007:3,1005:2,1015:20"},{id:9,commission:"0.39",condition:"1002:2,1015:10,1011:8,1003:18"},{id:10,commission:"0.22",condition:"1006:12,1012:5,1011:14,1003:6"},{id:11,commission:"0.76",condition:"1009:11,1004:20,1012:9,1002:10"},{id:12,commission:"0.43",condition:"1007:16,1003:11,1012:16,1005:6"},{id:13,commission:"0.17",condition:"1010:5,1005:13,1001:8,1012:18"},{id:14,commission:"0.7",condition:"1015:18,1008:18,1006:16,1001:14"},{id:15,commission:"0.48",condition:"1002:10,1005:1,1011:2,1001:10"},{id:16,commission:.29,condition:"1008:11,1014:4,1006:8,1005:17"},{id:17,commission:.37,condition:"1006:14,1007:16,1012:19,1001:14"},{id:18,commission:.48,condition:"1008:4,1011:2,1009:15,1002:5"},{id:19,commission:.75,condition:"1013:1,1003:20,1014:11,1001:17"},{id:20,commission:.67,condition:"1003:10,1011:17,1002:14,1005:2"},{id:21,commission:.64,condition:"1010:10,1003:4,1005:6,1007:5"},{id:22,commission:"0.4",condition:"1015:9,1007:12,1011:5,1004:17"},{id:23,commission:.2,condition:"1003:19,1014:2,1015:16,1001:14"},{id:24,commission:.77,condition:"1014:3,1001:17,1008:18,1004:5"},{id:25,commission:.64,condition:"1002:13,1011:1,1010:15,1007:20"},{id:26,commission:.03,condition:"1002:11,1011:12,1012:2,1003:19"},{id:27,commission:.49,condition:"1007:16,1014:16,1006:10,1011:7"},{id:28,commission:.53,condition:"1014:7,1007:12,1011:17,1003:17"},{id:29,commission:.77,condition:"1012:10,1005:16,1010:14,1015:8"},{id:30,commission:.14,condition:"1011:7,1014:9,1006:14,1004:3"},{id:31,commission:.53,condition:"1007:18,1010:14,1013:9,1006:11"},{id:32,commission:.46,condition:"1013:19,1005:2,1012:12,1008:20"},{id:33,commission:.2,condition:"1012:6,1013:11,1002:13,1009:16"},{id:34,commission:.02,condition:"1009:9,1010:12,1011:14,1012:2"},{id:35,commission:.13,condition:"1001:18,1004:19,1013:6,1003:10"},{id:36,commission:.21,condition:"1003:11,1008:17,1014:7,1007:17"},{id:37,commission:.44,condition:"1012:4,1010:20,1002:4,1011:11"},{id:38,commission:.22,condition:"1014:13,1004:19,1002:11,1015:18"},{id:39,commission:.36,condition:"1007:8,1012:13,1004:16,1002:16"},{id:40,commission:.28,condition:"1004:10,1005:10,1008:18,1011:16"},{id:41,commission:.18,condition:"1010:8,1009:8,1008:7,1011:6"},{id:42,commission:.43,condition:"1009:1,1005:8,1007:2,1002:13"},{id:43,commission:.14,condition:"1006:1,1004:4,1014:11,1008:5"},{id:44,commission:.62,condition:"1009:15,1003:18,1002:4,1007:9"},{id:45,commission:.11,condition:"1012:15,1010:3,1007:3,1011:3"},{id:46,commission:.39,condition:"1003:12,1007:3,1010:16,1002:14"},{id:47,commission:.49,condition:"1010:14,1015:20,1003:15,1014:6"},{id:48,commission:.06,condition:"1013:17,1007:14,1008:17,1001:10"},{id:49,commission:.48,condition:"1002:6,1004:11,1009:12,1006:20"},{id:50,commission:.05,condition:"1006:17,1012:9,1008:2,1015:11"},{id:51,commission:.04,condition:"1011:8,1004:19,1002:5,1003:11"},{id:52,commission:.43,condition:"1015:15,1013:10,1001:15,1004:6"},{id:53,commission:.08,condition:"1014:14,1012:12,1010:1,1015:18"},{id:54,commission:.45,condition:"1005:2,1002:13,1009:6,1015:17"},{id:55,commission:.7,condition:"1001:3,1014:9,1005:7,1010:15"},{id:56,commission:.05,condition:"1006:17,1005:19,1009:17,1003:18"},{id:57,commission:.67,condition:"1007:1,1008:17,1002:16,1009:15"},{id:58,commission:.32,condition:"1006:10,1008:5,1005:4,1007:9"},{id:59,commission:.79,condition:"1012:5,1009:1,1013:6,1008:5"},{id:60,commission:.69,condition:"1015:6,1012:7,1010:1,1001:3"},{id:61,commission:.39,condition:"1015:12,1006:5,1011:15,1002:7"},{id:62,commission:.44,condition:"1015:1,1007:15,1011:8,1006:6"},{id:63,commission:.01,condition:"1010:18,1005:16,1009:13,1003:7"},{id:64,commission:.27,condition:"1007:17,1006:10,1005:9,1004:5"},{id:65,commission:.39,condition:"1008:15,1003:10,1014:20,1005:15"},{id:66,commission:.73,condition:"1004:15,1008:5,1002:14,1012:14"},{id:67,commission:.13,condition:"1001:16,1012:20,1011:20,1003:1"},{id:68,commission:.69,condition:"1013:4,1008:3,1006:6,1007:17"},{id:69,commission:.37,condition:"1015:3,1004:9,1013:7,1009:1"},{id:70,commission:.71,condition:"1010:3,1004:1,1011:7,1012:11"},{id:71,commission:.29,condition:"1008:11,1002:6,1003:8,1015:13"},{id:72,commission:.31,condition:"1005:2,1002:18,1012:19,1010:14"},{id:73,commission:.39,condition:"1012:4,1006:2,1003:7,1004:2"},{id:74,commission:.26,condition:"1003:20,1012:18,1002:3,1001:20"},{id:75,commission:.18,condition:"1006:1,1014:3,1008:12,1002:5"},{id:76,commission:.51,condition:"1007:1,1012:2,1004:11,1014:2"},{id:77,commission:.21,condition:"1008:15,1009:6,1012:4,1007:7"},{id:78,commission:.73,condition:"1015:16,1012:16,1006:20,1008:12"},{id:79,commission:.65,condition:"1006:6,1004:8,1007:12,1011:7"},{id:80,commission:.39,condition:"1009:15,1003:16,1004:19,1007:4"},{id:81,commission:.14,condition:"1012:10,1015:8,1002:4,1003:8"},{id:82,commission:.2,condition:"1005:12,1011:19,1009:18,1002:14"},{id:83,commission:.53,condition:"1010:9,1003:8,1007:12,1015:20"},{id:84,commission:.62,condition:"1005:9,1014:6,1002:18,1007:8"},{id:85,commission:.37,condition:"1011:10,1001:7,1012:12,1004:12"},{id:86,commission:.59,condition:"1009:5,1011:20,1006:4,1015:11"},{id:87,commission:.11,condition:"1006:6,1005:9,1013:10,1014:9"},{id:88,commission:.08,condition:"1008:7,1011:4,1015:12,1014:11"},{id:89,commission:.02,condition:"1002:17,1003:2,1005:11,1010:14"},{id:90,commission:.32,condition:"1002:19,1013:8,1007:5,1001:13"},{id:91,commission:.19,condition:"1008:15,1013:10,1014:10,1007:16"},{id:92,commission:.13,condition:"1004:8,1011:13,1008:15,1007:9"},{id:93,commission:.34,condition:"1013:12,1001:9,1006:8,1008:11"},{id:94,commission:.22,condition:"1002:6,1001:17,1013:16,1005:11"},{id:95,commission:.15,condition:"1005:6,1001:14,1015:4,1008:16"},{id:96,commission:.06,condition:"1003:4,1001:8,1007:8,1005:18"},{id:97,commission:.74,condition:"1013:12,1009:13,1006:2,1011:2"}],lang:[],landLevel:[{id:1,reward:"1002:0",cost:"1002:0",gain:null},{id:2,reward:"1002:1500",cost:"1002:10000",gain:.1},{id:3,reward:"1002:2000",cost:"1002:30000",gain:.25},{id:4,reward:"1002:2500",cost:"1002:50000",gain:.4},{id:5,reward:"1002:3000",cost:"1002:100000",gain:.55}],feed:[{id:1001,name:"饼干",icon:"pet_feed/1001_feed.png",vitality:1,cost:"1002:30",desc:"可增加宠物&点体力"},{id:1002,name:"坚果",icon:"pet_feed/1002_feed.png",vitality:2,cost:"1002:50",desc:"可增加宠物&点体力"},{id:1003,name:"火腿",icon:"pet_feed/1003_feed.png",vitality:5,cost:"1002:100",desc:"可增加宠物&点体力"},{id:1004,name:"牛肉",icon:"pet_feed/1004_feed.png",vitality:50,cost:"1002:900",desc:"可增加宠物&点体力"},{id:1005,name:"猪肉",icon:"pet_feed/1005_feed.png",vitality:20,cost:"1002:460",desc:"可增加宠物&点体力"},{id:1006,name:"鸡肉",icon:"pet_feed/1006_feed.png",vitality:10,cost:"1002:270",desc:"可增加宠物&点体力"}],currency:[{id:1001,name:"钻石",icon:"main_scene/img_diamond.png"},{id:1002,name:"金币",icon:"main_scene/img_coin.png"}],config:[{id:"all_speed_up_times",value:30},{id:"all_speed_up_time",value:600},{id:"unlock_land_cost",value:"1002:0,1002:0,1002:40000,1002:50000,1002:20000,1002:20000,1002:20000,1002:20000,1002:20000"}]},B=class{static parseString(e,t=","){return e?e.split(t):[]}};B.formatSeconds=(e=>new Date(1e3*e).toISOString().substr(11,8));var x={pet:e=>({id:e.id,name:e.name,icon:e.icon||`pet_feed/${e.id}_dog.png`,vitality_max:e.vitality_max,vitality_consume:e.vitality_consume,cost:getRewardCurrencyBase(e.cost),desc:e.desc,sensitive:e.sensitive,ability:e.ability}),feed:e=>({id:e.id,name:e.name,icon:e.icon||`pet_feed/${e.id}_feed.png`,vitality:e.vitality,cost:getRewardCurrencyBase(e.cost),desc:e.desc}),order:e=>({id:e.id,commission:Number(e.commission),condition:B.parseString(e.condition).map(e=>{let t=B.parseString(e,":");return{plant:D.table("plant").get(Number(t[0])),count:Number(t[1])}})}),plant:e=>({id:e.id,name:e.name,icon:e.icon,matureIcon:`plant_icon/${e.icon.match(/\d+/g)[0]}_mature.png`,growingIcon:`plant_icon/${e.icon.match(/\d+/g)[0]}_growing.png`,gain:B.parseString(e.gain).map(e=>getRewardCurrencyBase(e)),desc:e.desc,seed_price:getRewardCurrencyBase(e.seed_price),harvest:Number(B.parseString(e.harvest,"~")[1]),mature_time:Number(e.mature_time),unlock_cost:getRewardCurrencyBase(e.unlock_cost),unlock_reward:B.parseString(e.unlock_reward).map(e=>getRewardCurrencyBase(e))}),currency:e=>({id:e.id,icon:e.icon,name:e.name}),landLevel:e=>({id:e.id,reward:getRewardCurrencyBase(e.reward),cost:getRewardCurrencyBase(e.cost),gain:e.gain}),config(e){switch(e.id){case"all_speed_up_times":return{id:"all_speed_up_times",value:e.value};case"all_speed_up_time":return{id:"all_speed_up_time",value:e.value};case"unlock_land_cost":return{id:"unlock_land_cost",value:B.parseString(e.value).map(e=>getRewardCurrencyBase(e))}}},signIn:e=>({id:e.id,days:e.days,reward:getRewardCurrencyBase(e.reward)}),task:e=>({id:e.id,times:e.times,reward:getRewardCurrencyBase(e.reward),desc:e.desc,title:e.title,icon:e.icon||"game/img_barm.png"})};function getRewardCurrencyBase(e){if(!e)return null;let t=B.parseString(e,":");return{obj:D.table("currency").get(Number(t[0])),count:Number(t[1])}}var C,D=new class{constructor(){this.tableCache=new Map}table(e){if(this.tableCache.has(e))return this.tableBack(this.tableCache.get(e));let t=[];return I[e].forEach(i=>{t.push(x[e](i))}),this.tableCache.set(e,t),this.tableBack(t)}tableBack(e){return{list:e,get(t){for(let i=0,s=e.length;i<s;i++)if(e[i].id==t)return e[i];return null}}}},N=D,T=new class{constructor(){this.list=[]}init(e){e.forEach(e=>this.list.push({id:e.id,times:e.times,receive:e.receive,base:N.table("task").get(e.id)}))}getTask(e){for(let t=0;t<this.list.length;t++)if(this.list[t].id==e)return this.list[t];return null}taskAddTimes(e){let t=this.getTask(e);t&&t.times++}clear(){this.list.length=0}},V=new class{constructor(){this.list=new Map}init(e){e.forEach(e=>{this.addLand(e)})}getLand(e){return this.list.get(e)}addLand(e){this.list.set(e.id,e)}clear(){this.list.clear()}},O=new class{constructor(){this.list=[]}init(e){N.table("pet").list.forEach(t=>{this.list.push({base:t,lock:!e.includes(t.id)})})}getUnlockLen(){let e=0;return this.list.forEach(t=>{t.lock||e++}),e}clear(){this.list.length=0}},A=new class{constructor(){this.list=[]}init(e){N.table("plant").list.forEach(t=>{this.list.push({base:t,lock:!e.includes(t.id)})})}getPlant(e){for(let t=this.list.length-1;t>-1;t++)if(this.list[t].base.id==e)return this.list[t];return null}clear(){this.list.length=0}},P=new class{constructor(){this.orderLevel=1,this.nickname="name",this.uid=0,this.avatar="",this.diamond=999,this.gold=999,this.advertiseTimes=0,this.signInDays=0,this.signInId=0,this.speedUpTimes=0}get ttt(){return this.orderLevel}set ttt(e){this.orderLevel=e}clear(){this.nickname=""}},U=new class{constructor(){this.list=[]}init(e){e.forEach(e=>{this.list.push({base:N.table("plant").get(e.id),count:e.amount})})}reduceAmount(t,i){for(let e=0;e<this.list.length;e++)if(this.list[e].base.id==t){this.list[e].count-=i,this.list[e].count<=0&&this.list.splice(e,1);break}_.eventGlobal.event(e.update_Order)}getOne(e){return this.getItem(e)}getItem(e){for(let t=0;t<this.list.length;t++)if(this.list[t].base.id==e)return this.list[t];return null}add(t,i){let s=this.getItem(t);if(s)return s.count+=i,void _.eventGlobal.event(e.update_Order);this.list.push({base:N.table("plant").get(t),count:i}),_.eventGlobal.event(e.update_Order)}clear(){this.list.length=0}};!function(e){e.login="/login",e.loginToken="/login/token",e.orderReward="/order/reward",e.signInReward="/signIn/reward",e.landUnlock="/land/unlock",e.landSow="/land/sow",e.landGather="/land/gather",e.landUpgrade="/land/upgrade",e.landSpeedUp="/land/speedUp",e.seedsUnlock="/seeds/unlock",e.warehouse="/warehouse",e.warehouseSell="/warehouse/sell",e.petBuy="/pet/buy",e.petWear="/pet/wear",e.feedBuy="/feed/buy",e.taskReward="/task/reward"}(C||(C={}));var H=new class{forward(e){switch(e.api){case C.login:case C.loginToken:this.login(e.data);break;case C.landSpeedUp:this.taskUpdate(1002);break;case C.landGather:this.taskUpdate(1003),this.updateUserInfo(e.data);break;case C.feedBuy:this.taskUpdate(1005),this.taskUpdate(1006),this.updateUserInfo(e.data);break;case C.landSow:this.taskUpdate(1007),this.updateUserInfo(e.data);break;case C.warehouseSell:this.taskUpdate(1008),this.updateUserInfo(e.data);break;case C.seedsUnlock:case C.landSow:case C.landUnlock:case C.petBuy:case C.taskReward:case C.landUpgrade:case C.orderReward:this.updateUserInfo(e.data)}e.resolveEvent&&e.resolveEvent(e.data),e.call&&e.call(e.data),_.eventGlobal.event(e.api,e.data)}error(e,t){_.view.openHint({text:`errorCode ${e} ${JSON.stringify(t)}`,call:()=>{}})}login(e){var t,i,s;A.init(e.seeds),U.init(e.warehouse),P.uid=e.userInfo.uid,P.diamond=e.userInfo.diamond,P.gold=e.userInfo.gold,P.nickname=e.userInfo.nickname,P.avatar="",P.orderLevel=e.orderId||0,P.warePetId=null==(t=e.wearPet)?void 0:t.id,P.petVitality=(null==(i=e.wearPet)?void 0:i.vitality)||0,P.digestCountDown=(null==(s=e.wearPet)?void 0:s.digestCountDown)||0,P.advertiseTimes=e.advertiseTimes||0,P.signInDays=e.signInDays||0,P.signInId=e.signInId,P.speedUpTimes=e.speedUpTimes,O.init(e.pets),T.init(e.tasks),S.setJSON("isLogin",!0),e.token&&S.setJSON("token",e.token),V.init(e.lands),_.audio.soundMuted=S.getJSON().sound,_.audio.musicMuted=S.getJSON().music}loginOut(){A.clear(),U.clear(),O.clear(),V.clear(),T.clear(),S.setJSON("isLogin",!1),S.setJSON("token",null),P.uid=null,P.diamond=0,P.gold=0,P.nickname="",P.avatar="",P.orderLevel=0,P.warePetId=null,P.petVitality=0,P.digestCountDown=0,P.advertiseTimes=0,P.signInDays=0,P.signInId=null,P.speedUpTimes=0}updateUserInfo(e){P.gold=e.gold,P.diamond=e.diamond,P.advertiseTimes=e.advertiseTimes||0}taskUpdate(e){T.taskAddTimes(e)}},R=class{constructor(){this.baseUrl=null}init(e){if(this.baseUrl=e,this.xhr)return;let t=new XMLHttpRequest;t.onreadystatechange=(()=>{if(4==t.readyState)switch(t.status){case 200:default:this.completeHandler(JSON.parse(t.responseText))}}),this.xhr=t}send(e){var t;e.method||(e.method="post"),e.responseType||(e.responseType="json"),e.baseUrl||(e.baseUrl=this.baseUrl),this.sendData=e,e.headers||(e.headers=["Authorization",`Bearer ${S.getJSON().token}`]),console.log(`%c ==> send %c${e.api} %c${JSON.stringify(e.data)}`,"color:#82ccdd;font-weight:700;","color:#eb4d4b;font-weight:700;","color:#f8c291;font-weight:700;");let i=e.baseUrl+e.api;if(!e.api)return void _.view.open(l.views.HintView,{parm:{text:"http 地址不能为空"}});this.xhr.open("POST",i,!0),this.xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.xhr.setRequestHeader("Authorization",`Bearer ${S.getJSON().token}`);let s=[];return e.data&&(Object.keys(e.data).forEach(t=>{s.push(`${t}=${e.data[t]}`)}),(null==(t=e.data)?void 0:t.type)==k.ApiTypeAD&&(T.taskAddTimes(1001),T.taskAddTimes(1012))),this.xhr.send(s.join("&")),new Promise(e=>{this.backResolveEvent=e})}completeHandler(e){var t,i;if(e.code)return(null==(t=this.sendData)?void 0:t.error)&&this.sendData.error(e.code,e.data),H.error(e.code,e.data),console.error(e);console.log(`%c <== back %c${this.sendData.api} `,"color:#b8e994;font-weight:700;","color:#78e08f;font-weight:700;",e.data),H.forward({api:this.sendData.api,data:e.data,call:null==(i=this.sendData)?void 0:i.call,resolveEvent:this.backResolveEvent})}errorHandler(e){console.log(e)}processHandler(e){console.log(e)}};n([Instance],R,"inst",2);var M=class extends p{onOpened(e){this.data=e}onClick(e){switch(e.target.name){case"closeAddLandLayer":_.view.close(l.views.AddLandView);break;case"cost_gold":R.inst.send({api:C.landUnlock,data:{landId:this.data.id,type:k.ApiTypeDefault},call:e=>{var t;(null==(t=this.data)?void 0:t.call)&&(this.data.call(),_.view.close(l.views.AddLandView))}});break;case"ad_btn":R.inst.send({api:C.landUnlock,data:{landId:this.data.id,type:k.ApiTypeAD},call:e=>{var t;(null==(t=this.data)?void 0:t.call)&&(this.data.call(),_.view.close(l.views.AddLandView))}})}}},E=class extends p{constructor(){super(...arguments),this.priceLabel=null,this.priceIcon=null}onOpened(e){this.data=e;let t=N.table("landLevel").get(e.obj.level+1);this.priceLabel.text=`价格：${t.cost.count}`,this.priceIcon.skin=t.cost.obj.icon,console.log(e)}onClick(e){switch(e.target.name){case"closeAddLandLayer":_.view.close(l.views.FieldLevelUpView);break;case"upgradeBtn":case"upgradeAdBtn":R.inst.send({api:C.landUpgrade,data:{landId:this.data.obj.id,type:"upgradeBtn"==e.target.name?k.ApiTypeDefault:k.ApiTypeAD},call:e=>{this.data.call&&this.data.call(),_.view.close(l.views.FieldLevelUpView)}})}}},G=class extends _.gameScript{onHdAwake(){this.panelNode.vScrollBarSkin=null}onClick(e){switch(e.target.name){case"close":_.view.close(l.views.FriendsDescView)}}onHdDestroy(){Laya.loader.clearTextureRes("res/img_inviteBg1.png")}},F=class extends _.gameScript{constructor(){super(...arguments),this.intType=1e3}onOpened(){}onClick(e){switch(e.target.name){case"close":_.view.close(l.views.FriendsRewardView)}}onHdDestroy(){Laya.loader.clearTextureRes("res/img_inviteBg1.png")}},j=class extends _.gameScript{constructor(){super(...arguments),this.viewState=1}onOpened(){this.addBox.visible=!1,this.addBox.active=!1,this.itemList.array=new Array(20),this.itemList.renderHandler=new Laya.Handler(this,this.itemRender),this.itemList.vScrollBarSkin=null}itemRender(e,t){let i=e.getChildByName("new_box"),s=e.getChildByName("heart_box"),a=e.getChildByName("go_play_btn"),n=e.getChildByName("apply_btn"),o=e.getChildByName("del_btn");switch(s.visible=!1,i.visible=!1,i.active=!1,a.visible=!1,n.visible=!1,o.visible=!1,this.viewState){case 1:a.visible=!0,s.visible=!0;break;case 2:n.visible=!0;break;case 3:s.visible=!0,o.visible=!0}}onClick(e){switch(console.log(e.target.name),e.target.name){case"close":_.view.close(l.views.FriendsView);break;case"add_friend":if(2==this.viewState)break;this.viewState=2,this.addBox.visible=!0,this.addBox.active=!0,this.itemList.height=590,this.itemList.refresh();break;case"del_friend":if(3==this.viewState)break;this.addBox.visible=!1,this.addBox.active=!1,this.viewState=3,this.itemList.height=914,this.itemList.refresh();break;case"desc_btn":_.view.open(l.views.FriendsDescView);break;case"reward_btn":_.view.open(l.views.FriendsRewardView)}}},$=class extends _.gameScript{onOpened(e){var t;this.data=e,this.text.text=(null==(t=this.data)?void 0:t.text)||"",this.data.call?this.confirmBtn.visible=!0:this.confirmBtn.visible=!1,this.data.cancelCall?this.cancelBtn.visible=!0:this.cancelBtn.visible=!1,this.data.call&&this.data.cancelCall?this.confirmBtn.x=252:this.confirmBtn.x=458}onClick(e){var t,i;switch(e.target.name){case"cancel":(null==(t=this.data)?void 0:t.cancelCall)&&this.data.cancelCall(),_.view.close(l.views.HintView);break;case"confirm":(null==(i=this.data)?void 0:i.call)&&this.data.call(),_.view.close(l.views.HintView)}}},J=class extends p{constructor(){super(...arguments),this.loadBar=null,this.loadBox=null,this.loginBox=null,this.userInput=null,this.loadBarOldWidth=0}onOpened(e){var t;this.data=e,(null==(t=S.getJSON())?void 0:t.isLogin)?(this.login(),this.loginBox.visible=!1,this.loadBox.visible=!0,this.userInput.visible=!1):(this.loginBox.visible=!0,this.loadBox.visible=!1,this.userInput.visible=!0)}onHdAwake(){h.on(e.load_progress,this,this.loadProgress),console.log("awake")}onHdEnable(){this.loadBarOldWidth=this.loadBar.width,this.loadBar.width=0}onClick(e){switch(e.target.name){case"login_btn":this.login()}}login(){S.getJSON().token?R.inst.send({api:C.loginToken,call:e=>{var t;(null==(t=this.data)?void 0:t.call)&&this.data.call(e),this.loginBox.visible=!1,this.loadBox.visible=!0},error:(e,t)=>{S.clear(),this.loginBox.visible=!0,this.loadBox.visible=!1,this.userInput.visible=!0}}):R.inst.send({api:C.login,data:{account:this.userInput.text},call:e=>{var t;(null==(t=this.data)?void 0:t.call)&&this.data.call(e),this.loginBox.visible=!1,this.loadBox.visible=!0},error:(e,t)=>{S.clear(),this.loginBox.visible=!0,this.loadBox.visible=!1,this.userInput.visible=!0}})}loadProgress(e){this.loadBar.width=e*this.loadBarOldWidth}onHdDisable(){h.off(e.load_progress,this,this.loadProgress)}},W=class extends p{onClick(e){switch(e.target.name){case"close":b.inst.close(l.views.MailView)}}},X=class extends _.gameScript{constructor(){super(...arguments),this.icon=null,this.fieldNode=null,this.shadow=null,this.fieldEmptyRes="",this.lvNode=null,this.timeBox=null,this.countDownLb=null,this.topStateIcon=null,this.matureNode=null,this.emptyFieldNode=null,this.unlockIcon="",this.fieldId=null,this.buildIng=!1}onHdAwake(){this.fieldNode=this.owner,this.countDownLb=this.timeBox.getChildByName("countDownLb"),this.init()}init(){this.icon.skin=null,this.showShadowIcon(!1),this.timeBox.visible=!1,this.timeBox.active=!1,this.topStateIcon.visible=!1,this.lvNode.visible=!1}updateData(){this.landList=V.list,this.data=this.landList.get(this.fieldId),this.renderData()}renderData(){this.data?(this.showIcon(!0),this.fieldNode.skin=this.fieldEmptyRes,this.showIcon(Boolean(this.data.productId)),this.lvNode.visible=!0,this.updateLevel(),this.data.productId&&this.plantIconAni(!0),this.data.productId&&this.data.matureTimeLeft?(this.timeBox.visible=!0,this.timeBox.active=!0,this.icon.skin=N.table("plant").get(this.data.productId).growingIcon,this.showShadowIcon(!0),this.updateCountDown(),this.topStateIcon.visible=!0,this.topStateIconAni(!0),this.setStateIconSkin(1)):this.data.productId&&(this.topStateIcon.visible=!0,this.showShadowIcon(!0),this.topStateIconAni(!0),this.updateCountDown())):(this.icon.skin=this.unlockIcon,this.showIcon(!1))}showIcon(e){this.icon.visible=e}setStateIconSkin(e){switch(e){case 1:this.topStateIcon.skin="main_scene/img_speedUp.png";break;case 2:this.topStateIcon.skin="main_scene/img_landUpdateBtn2.png";break;case 3:this.topStateIcon.skin="main_scene/img_harvest.png"}}topStateIconAni(e){this.topStateIconTween||(this.topStateIconTween=Laya.TimeLine.to(this.topStateIcon,{y:this.topStateIcon.y-50},800,null).to(this.topStateIcon,{y:this.topStateIcon.y},800)),this.topStateIcon.visible=e,e?this.topStateIconTween.play(null,!0):this.topStateIconTween.pause()}showTimeBox(e){this.timeBox.visible=e}showShadowIcon(e){this.shadow.visible=e,this.shadow.active=e}plantIconAni(e){this.plantIconTween||(this.plantIconTween=Laya.TimeLine.to(this.icon,{skewX:6},900).to(this.icon,{skewX:-6},1800).to(this.icon,{skewX:0},900)),e?Laya.timer.once(1e3*Math.random(),this,()=>{this.plantIconTween.play(null,!0)}):this.plantIconTween.pause()}updateCountDown(){var e,t;this.data.matureTimeLeft>0?(this.countDownLb.text=B.formatSeconds(this.data.matureTimeLeft),Laya.timer.clearAll(this),Laya.timer.once(1e3,this,()=>(this.data.matureTimeLeft--,this.countDownLb.text=B.formatSeconds(this.data.matureTimeLeft),this.updateCountDown()))):(this.data.matureTimeLeft=0,console.log("倒计时结束 "),this.icon.skin=null==(t=N.table("plant").get(null==(e=this.data)?void 0:e.productId))?void 0:t.matureIcon,this.buildIng||this.setStateIconSkin(3),this.showTimeBox(!1))}updateLevel(){this.lvNode.skin=`main_scene/img_level${this.data.level}.png`}speedUp(){var e;(null==(e=this.data)?void 0:e.matureTimeLeft)&&(this.data.matureTimeLeft-=N.table("config").get("all_speed_up_time").value,this.updateCountDown())}clearField(){this.topStateIcon.visible=!1,this.data.productId=null,this.icon.skin=null,this.showIcon(!1),this.showShadowIcon(!1)}onClick(){return o(this,null,function*(){if(console.log(this.fieldId,this.buildIng),_.audio.playSound(l.audios.button_click),this.data){if(this.buildIng)return void(N.table("landLevel").get(this.data.level+1)?_.view.open(l.views.FieldLevelUpView,{parm:{obj:this.data,call:()=>{this.data.level++,this.updateLevel()}}}):(console.log("满级"),this.topStateIconAni(!1),_.view.openHint({text:"已满级",call:()=>{}})));if(this.data.productId){if(this.data.matureTimeLeft)return console.log("加速"),void _.view.open(l.views.SpeedUpView);{console.log("收获");let t=0;yield R.inst.send({api:C.landGather,data:{landId:this.data.id,type:k.ApiTypeDefault},call:e=>{t=e.amount,U.add(this.data.productId,e.amount)}});let i=[{obj:N.table("plant").get(this.data.productId),count:t,posType:3}];return _.eventGlobal.event(e.play_get_reward,{node:this.owner,list:i,callBack:()=>{}}),void this.clearField()}}_.view.open(l.views.ShopView,{parm:{id:0,parm:{landId:this.fieldId},call:e=>{console.log(e),this.landList.get(this.fieldId).productId=e.base.id,this.landList.get(this.fieldId).matureTimeLeft=e.base.mature_time,this.data=this.landList.get(this.fieldId),this.renderData()}}})}else console.log(this.data),_.view.open(l.views.AddLandView,{parm:{id:this.fieldId,call:()=>{this.data={id:this.fieldId,level:1,matureTimeLeft:0,productId:null},V.addLand(this.data),this.updateData()}}})})}onHdDestroy(){var e,t;Laya.timer.clearAll(this),Laya.Tween.clearAll(this),null==(e=this.topStateIconTween)||e.destroy(),null==(t=this.plantIconTween)||t.destroy(),this.topStateIconTween=null,this.plantIconTween=null}};n([_.findByName],X.prototype,"icon",2),n([_.findByName],X.prototype,"fieldNode",2),n([_.findByName],X.prototype,"shadow",2),n([_.findByName],X.prototype,"lvNode",2),n([_.findByName],X.prototype,"timeBox",2),n([_.findByName],X.prototype,"topStateIcon",2),n([_.eventOn(e.update_field)],X.prototype,"updateData",1),n([_.eventOn(e.land_speed_up)],X.prototype,"speedUp",1);var Y=class extends _.gameScript{constructor(){super(...arguments),this.addLandLayer=null,this.diamondNode=null,this.goldNode=null,this.avatarNode=null,this.landBox=null,this.centerBox=null,this.orderBox=null,this.landUpLayer=null,this.topLayerOnStage=null,this.topGoldIcon=null,this.topDiamondIcon=null,this.warehouseBtn=null,this.getRewardPrefab=null,this.floatRewardIcon=null,this.testBtn=null,this.petBox=null,this.landList=[]}onOpened(){["res/loadingBg.png","res/img_woodtitle.png","res/img_storeHouseBg.png","res/img_storebg.png","res/img_shelf.png","res/img_popUpBg.png","res/img_landBg.png","res/img_inviteBg1.png","res/img_housetop.png","res/img_farmlandLogo.png","res/atlas/plant_icon.png","res/atlas/pet_feed.png","res/atlas/main_scene.png","res/atlas/game.png"].forEach(e=>{e.endsWith("png")&&Laya.loader.clearTextureRes(e)})}onHdAwake(){Laya.stage.addChild(this.topLayerOnStage),this.landUpLayer.visible=!1,this.landUpLayer.active=!1;for(let e=0;e<this.landBox.numChildren;e++)this.landList.push(this.landBox.getChildAt(e).getComponent(X));this.landList.sort((e,t)=>e.fieldId-t.fieldId),Laya.timer.frameOnce(1,this,()=>{_.eventGlobal.event(e.update_field),this.hitLandAdd()})}hitLandAdd(){for(let e=0,t=this.landList.length;e<t;e++)if(!this.landList[e].data){this.landList[e].showIcon(!0);break}}onHdEnable(){_.observableProperty.watch(P,this).key("diamond",e=>{this.diamondNode.value=e}).key("gold",e=>{this.goldNode.value=e}).key("avatar",e=>{e&&(this.avatarNode.skin=e)}).key("warePetId",e=>{e?(this.petBox.visible=!0,this.petBox.getChildByName("dog").skin=N.table("pet").get(e).icon):this.petBox.visible=!1}).key("petVitality",e=>{if(P.warePetId&&this.petBox.visible){let t=this.petBox.getChildByName("box").getChildByName("vitality_bar"),i=e/N.table("pet").get(P.warePetId).vitality_max;i>1&&(i=1),t.width=130*i}}).key("digestCountDown",e=>{Laya.timer.clear(this,this.digestCountDown),this.petBox.visible&&Laya.timer.once(1e3*e,this,this.digestCountDown)}),this.addLandLayer.visible=!1,this.updateOrder()}digestCountDown(){if(!P.warePetId)return;const e=N.table("pet").get(P.warePetId);P.petVitality-e.vitality_consume<=0?P.petVitality=0:P.petVitality-=e.vitality_consume,P.digestCountDown=k.petDigestIntervalTime}gameInit(e){console.log(e)}onClick(e){switch(console.log(e.target.name),e.target.name){case"closeAddLandLayer":this.addLandLayer.visible=!1;break;case"task":_.view.open(l.views.TaskView);break;case"signIn":_.view.open(l.views.SignInView);break;case"mail":_.view.open(l.views.MailView);break;case"shop":_.view.open(l.views.ShopView);break;case"head":_.view.open(l.views.SettingView);break;case"warehouse":_.view.open(l.views.WarehouseView);break;case"buy_feed":case"dog":_.view.open(l.views.ShopView,{parm:{id:2}});break;case"order_box":_.view.open(l.views.OrderView);break;case"friends":_.view.open(l.views.FriendsView);break;case"land":break;case"landLevelUp":this.switchLandLevelUp(!0);break;case"close_up":this.switchLandLevelUp(!1)}}updateOrder(){var e;let t,i=this.orderBox,s=N.table("order").get(P.orderLevel+1),a=0,n=0,o=0,l=0;if(!s)return console.log("等级已完");for(let d=0;d<4;d++){let c=i.getChildByName("item_"+d);s.condition[d]?((n=(null==(e=U.getOne(s.condition[d].plant.id))?void 0:e.count)||0)>=(o=s.condition[d].count)&&l++,c.getChildByName("icon").skin=s.condition[d].plant.icon,c.getChildByName("num").text=`${n}/${o}`,c.getChildByName("bar").width=87*(n/o>1?1:n/o),c.visible=!0,s.condition[d].plant.gain.forEach(e=>{e.obj.id===k.goldId&&(t||(t=e),a+=e.count*o)})):c.visible=!1}if(t){let e=i.getChildByName("btn_box").getChildByName("box");e.getChildByName("icon").skin=t.obj.icon,e.getChildByName("value").value=`${a+Math.round(a*s.commission)}`}i.getChildByName("name_title").text=`完成${P.orderLevel+1}级订单`,l==s.condition.length&&R.inst.send({api:C.orderReward,data:{orderId:P.orderLevel+1},call:()=>{s.condition.forEach(e=>{U.reduceAmount(e.plant.id,e.count)}),this.playGetRewardAni({node:i.getChildByName("btn_box"),list:[{obj:N.table("currency").get(k.goldId),count:a+Math.round(a*s.commission),posType:1}],callBack:()=>{this.updateOrder()}}),P.orderLevel++}})}switchLandLevelUp(e){let t=this.landUpLayer.getChildByName("bg");e?(t.alpha=0,Laya.Tween.to(t,{alpha:.75},150),this.landUpLayer.getChildByName("land_outer").addChild(this.landBox),this.landUpLayer.active=!0,this.landUpLayer.visible=!0,this.landList.forEach(e=>{e.data&&N.table("landLevel").get(e.data.level+1)&&(e.showIcon(!1),e.setStateIconSkin(2),e.topStateIconAni(!0),e.showTimeBox(!1),e.showShadowIcon(!1)),e.buildIng=!0})):(Laya.Tween.to(t,{alpha:0},150,null,Laya.Handler.create(this,()=>{this.landUpLayer.active=!1,this.landUpLayer.visible=!1,this.centerBox.addChild(this.landBox)})),this.landList.forEach(e=>{e.data&&(e.showIcon(!0),e.data.id?(e.data.matureTimeLeft&&(e.showTimeBox(!0),e.showShadowIcon(!0)),e.data.productId||e.clearField()):e.clearField()),e.buildIng=!1,e.data?(e.data.id&&e.setStateIconSkin(e.data.matureTimeLeft?1:3),e.topStateIconAni(Boolean(e.data.productId))):(e.setStateIconSkin(1),e.topStateIconAni(!1))}))}playGetRewardAni(e){Laya.timer.once(2e3,this,()=>{e.callBack&&e.callBack()}),e.list.forEach((t,i)=>{var s;let a=Laya.Pool.getItemByCreateFun("floatRewardBox",this.getRewardPrefab.create,this.getRewardPrefab),n=a.getChildByName("icon");n.skin=(null==(s=t.obj)?void 0:s.icon)||"";let o=50/n.width;n.scale(o,o),a.alpha=0;let l=this.topLayerOnStage.globalToLocal(e.node.localToGlobal(new Laya.Point));a.pos(l.x+e.node.get_width()*e.node.anchorX,l.y-60*i),this.topLayerOnStage.addChild(a),a.getChildByName("count").value="x"+t.count,Laya.Tween.to(a,{y:a.y-40,alpha:1},150,null,Laya.Handler.create(this,i=>{Laya.timer.once(1e3,this,()=>{Laya.Pool.recover("floatRewardBox",i);let s=this.topLayerOnStage.globalToLocal(i.localToGlobal(Laya.Point.create()));if(i.removeSelf(),!e.notFly)for(let e=0;e<5;e++){let i,a=Laya.Pool.getItemByCreateFun("floatRewardIcon",this.floatRewardIcon.create,this.floatRewardIcon);switch(a.skin=t.obj.icon,a.pos(s.x+20*Math.random()*(Math.random()<.5?1:-1),s.y+20*Math.random()*(Math.random()<.5?1:-1)),a.scale(o,o),this.topLayerOnStage.addChild(a),a.zOrder=999,t.posType){case 1:i=this.topGoldIcon;break;case 2:i=this.topDiamondIcon;break;case 3:i=this.warehouseBtn}let n=i.localToGlobal(new Laya.Point(i.width/2,i.height/2)),l=this.topLayerOnStage.globalToLocal(n);Laya.Tween.to(a,{x:l.x,y:l.y},1e3,Laya.Ease.backIn,Laya.Handler.create(this,e=>{e.removeSelf(),Laya.Pool.recover("floatRewardIcon",e)},[a]),150*e)}})},[a]),50*i,null,!0)})}};n([_.eventOn(C.login)],Y.prototype,"gameInit",1),n([_.eventOn(e.update_Order)],Y.prototype,"updateOrder",1),n([_.eventOn(e.play_get_reward)],Y.prototype,"playGetRewardAni",1);var K=class extends _.gameScript{constructor(){super(...arguments),this.orderList=null,this.btnLockRes=null,this.btnResCur=null}onOpened(){this.dataList=N.table("order").list;let e=P.orderLevel||0;this.dataList.sort((t,i)=>t.id*(i.id<=e?-1:1)),this.orderList.array=this.dataList,this.orderList.renderHandler=new Laya.Handler(this,this.renderList),this.orderList.vScrollBarSkin=null}renderList(e,t){var i;let s,a=this.dataList[t],n=0,o=0,l=0,d=e.getChildByName("reward_box");e.getChildByName("order_lv").text=`${a.id}级订单`;for(let t=0;t<4;t++){let d=e.getChildByName("item_"+t);a.condition[t]?((o=(null==(i=U.getOne(a.condition[t].plant.id))?void 0:i.count)||0)>=(l=a.condition[t].count)&&0,d.getChildByName("icon").skin=a.condition[t].plant.icon,a.id<P.orderLevel+1?(d.getChildByName("num").text=`${l}/${l}`,d.getChildByName("bar").width=87):(d.getChildByName("num").text=`${o}/${l}`,d.getChildByName("bar").width=87*(o/l>1?1:o/l)),d.visible=!0,a.condition[t].plant.gain.forEach(e=>{e.obj.id===k.goldId&&(s||(s=e),n+=e.count*a.condition[t].count)})):d.visible=!1}let c=e.getChildByName("btn");a.id>P.orderLevel+1?(c.skin=this.btnLockRes,c.active=!1):a.id==P.orderLevel+1?c.skin=this.btnResCur:(console.log("已完成"),c.gray=!0,c.active=!1),s&&(d.getChildByName("icon").skin=s.obj.icon,d.getChildByName("value").text=`+${n+Math.round(n*a.commission)}`)}onClick(e){switch(e.target.name){case"close":_.view.close(l.views.OrderView)}}},q=class extends _.gameScript{constructor(){super(...arguments),this.musicNode=null,this.soundNode=null}onOpened(){this.musicChange(),this.soundChange()}onClick(t){switch(console.log(t.target.name),t.target.name){case"close":_.view.close(l.views.SettingView);break;case"music":_.audio.playSound(l.audios.button_click),_.audio.musicMuted=!_.audio.musicMuted,S.setJSON("music",_.audio.musicMuted),this.musicChange();break;case"sound":_.audio.playSound(l.audios.button_click),_.audio.soundMuted=!_.audio.soundMuted,S.setJSON("sound",_.audio.soundMuted),this.soundChange();break;case"sign_out":_.view.openHint({text:"确认要退出登录？",call:()=>{S.setJSON("isLogin",!1),S.setJSON("token",null),_.view.loginOut(),H.loginOut(),_.view.open(l.views.LoginView,{parm:{call:()=>{_.eventGlobal.event(e.login_game)}}})},cancelCall:()=>{}})}}musicChange(){const e=this.musicNode.getChildByName("box"),t=e.getChildByName("icon");let i=_.audio.musicMuted;console.log(i),t.x=i?91:-14,t.skin=i?"game/img_musicOffBtn.png":"game/img_musicOnBtn.png",e.skin=i?"game/img_swithOff.png":"game/img_switchOn.png"}soundChange(){const e=this.soundNode.getChildByName("box"),t=e.getChildByName("icon");let i=_.audio.soundMuted;t.x=i?91:-14,t.skin=i?"game/img_musicOffBtn.png":"game/img_musicOnBtn.png",e.skin=i?"game/img_swithOff.png":"game/img_switchOn.png"}},z=new class{constructor(){this.list=[]}init(){N.table("feed").list.forEach(e=>{this.list.push({base:e,lock:!1})})}clear(){this.list.length=0}},Q=class extends p{constructor(){super(...arguments),this.itemList=null,this.btnBoxTop=null,this.bottomBox=null,this.seedDesc=null,this.matureTime=null,this.matureGainBox=null,this.lockBtnBox=null,this.itemBuyBtn=null,this.feedBuyBtn=null,this.feedDesc=null,this.petIcon=null,this.petDesc=null,this.petName=null,this.vitalityMax=null,this.petBuyBtn=null,this.goWatch=null,this.goRest=null,this.diamondFont=null,this.priceList=null,this.btnTopResList=[["game/img_seedsNormal.png","game/img_seedsSelected.png"],["game/img_petNormal.png","game/img_petSelected.png"],["game/img_foodnNormal.png","game/img_foodnSelected.png"],["game/img_bankNormal.png","game/img_bankSelected.png"]],this.topBtnSelectIndex=0,this.itemListSelectIndex=0,this.itemSelectBg=["game/img_petbagNormal.png","game/img_petbagSelected.png"],this.selectPetIndex=0,this.isFirst=!0}onHdAwake(){this.itemList.renderHandler=new Laya.Handler(this,this.updateItem),this.itemList.selectHandler=new Laya.Handler(this,this.onSelect),this.itemList.vScrollBarSkin=null,this.priceList.vScrollBarSkin=null,this.priceList.renderHandler=new Laya.Handler(this,this.updatePriceItem),this.priceList.selectHandler=new Laya.Handler(this,this.onPriceSelect),_.observableProperty.watch(P,this).key("diamond",e=>{this.diamondFont.value=e})}onOpened(e){console.log(e),this.data=e,this.topBtnSelectIndex=(null==e?void 0:e.id)||0,this.updateTopBtnState()}onSelect(e){this.itemListSelectIndex=e}getDataList(){return 0==this.topBtnSelectIndex?A.list:2==this.topBtnSelectIndex?(z.list.length||z.init(),z.list.sort((e,t)=>e.base.vitality-t.base.vitality)):void 0}updateItem(e,t){let i=this.getDataList()[t],s=e.getChildByName("hbox"),a=e.getChildByName("lock_icon");if(!i)return console.warn("数据丢失");if(i.lock)a.visible=!0,a.active=!0,s.visible=!1,s.active=!1;else{a.visible=!1,a.active=!1,s.visible=!0,s.active=!0;let e=0,t="";0==this.topBtnSelectIndex?(e=i.base.seed_price.count,t=i.base.seed_price.obj.icon):(e=i.base.cost.count,t=i.base.cost.obj.icon),s.getChildByName("num").value=e+"",s.getChildByName("gold_icon").skin=t}e.getChildByName("icon").skin=i.base.icon,e.getChildByName("name").text=i.base.name,t==this.itemListSelectIndex?(e.skin=this.itemSelectBg[1],this.updateSelectDesc(),this.isFirst||_.audio.playSound(l.audios.button_click),this.isFirst=!1):e.skin=this.itemSelectBg[0]}updateSelectDesc(){var e,t,i,s;let a=this.getDataList()[this.itemListSelectIndex];if(2===this.topBtnSelectIndex){this.seedDesc.parent.visible=!1,this.feedDesc.text=a.base.desc.replace("&",a.base.vitality+""),this.feedDesc.visible=!0;let e=this.feedBuyBtn.getChildByName("box");return e.getChildByName("icon").skin=a.base.cost.obj.icon,void(e.getChildByName("value").value=a.base.cost.count+"")}let n=a.base;this.seedDesc.parent.visible=!0,this.feedDesc.visible=!1,this.seedDesc.text=n.desc,this.matureTime.text=B.formatSeconds(n.mature_time),(null==(e=this.data)?void 0:e.call)?this.itemBuyBtn.visible=!a.lock:this.itemBuyBtn.visible=!1,this.lockBtnBox.visible=a.lock,this.lockBtnBox.active=a.lock;let o=n.gain;for(let e=0;e<3;e++){let t=this.matureGainBox.getChildAt(e),i=null,s=0,a=o[e-1];0===e?(s=n.harvest,i=n.icon):a&&(i=a.obj.icon,s=a.count*n.harvest),t.getChildByName("icon").skin=i,t.getChildByName("count").text="x"+s}let l=this.lockBtnBox.getChildByName("unlock_buy").getChildByName("box");l.getChildByName("icon").skin=null==(i=null==(t=n.unlock_cost)?void 0:t.obj)?void 0:i.icon,l.getChildByName("value").value=(null==(s=n.unlock_cost)?void 0:s.count)+""}onClick(e){var t;switch(console.log(e.target.name),e.target.name){case"close":b.inst.close(l.views.ShopView);break;case"seed":case"pet":case"feed":case"bank":_.audio.playSound(l.audios.button_click);let i=this.btnBoxTop.getChildIndex(e.target);this.topBtnSelectIndex!=i&&(this.topBtnSelectIndex=Number(i),this.updateTopBtnState());break;case"buy_btn":R.inst.send({api:C.landSow,data:{landId:null==(t=this.data.parm)?void 0:t.landId,plantId:this.getDataList()[this.itemListSelectIndex].base.id,type:k.ApiTypeDefault},call:e=>{var t;b.inst.close(l.views.ShopView),(null==(t=this.data)?void 0:t.call)&&this.data.call(this.getDataList()[this.itemListSelectIndex])}});break;case"unlock_buy":case"ad_unlock":R.inst.send({api:C.seedsUnlock,data:{plantId:this.getDataList()[this.itemListSelectIndex].base.id,type:"ad_unlock"==e.target.name?k.ApiTypeAD:k.ApiTypeDefault},call:e=>{A.list[this.itemListSelectIndex].lock=!1,this.itemList.changeItem(this.itemListSelectIndex,A.list[this.itemListSelectIndex])}});break;case"left":this.selectPetIndex--,this.selectPetIndex<0&&(this.selectPetIndex=O.list.length-1),this.updatePet();break;case"right":this.selectPetIndex++,this.selectPetIndex>=O.list.length&&(this.selectPetIndex=0),this.updatePet();break;case"pet_btn":this.petBuy();break;case"go_watch":this.petGoWatch(O.list[this.selectPetIndex].base.id);break;case"go_rest":this.petGoWatch(1001);break;case"feed_buy":this.feedBuy()}}feedBuy(){let t=this.getDataList()[this.itemListSelectIndex];t&&R.inst.send({api:C.feedBuy,data:{feedId:t.base.id,type:k.ApiTypeDefault},call:i=>{P.petVitality+=t.base.vitality,_.eventGlobal.event(e.play_get_reward,{node:this.feedBuyBtn,list:[{obj:t.base,count:1,posType:2}],notFly:!0})}})}petGoWatch(e){R.inst.send({api:C.petWear,data:{petId:e,type:k.ApiTypeDefault},call:t=>{P.warePetId=e,this.updatePet()}})}petBuy(){let{base:e}=O.list[this.selectPetIndex];R.inst.send({api:C.petBuy,data:{petId:e.id,type:k.ApiTypeDefault},call:t=>{O.list[this.selectPetIndex].lock=!1,this.updatePet(),P.warePetId||(P.warePetId=e.id),P.petVitality||(P.petVitality=e.vitality_max,P.digestCountDown=k.petDigestIntervalTime)}})}updateTopBtnState(){for(let e=0;e<this.btnBoxTop.numChildren;e++){let t=this.btnBoxTop.getChildAt(e),i=t.getChildAt(0);e===this.topBtnSelectIndex?(t.skin="game/img-menuselected.png",i.skin=this.btnTopResList[e][1]):(t.skin="game/img-menunormal.png",i.skin=this.btnTopResList[e][0])}this.updateBottom()}updateBottom(){for(let e=0;e<this.bottomBox.numChildren;e++)this.updateCenterBoxState(e,!1);let e=this.itemBuyBtn.parent;switch(this.topBtnSelectIndex){case 0:this.isFirst=!0,this.updateCenterBoxState(0,!0),this.resetPetOrFeedList(),this.feedBuyBtn.visible=!1,e.visible=!0,e.active=!0;break;case 1:this.updateCenterBoxState(1,!0),this.updatePet();break;case 2:this.isFirst=!0,this.updateCenterBoxState(0,!0),this.resetPetOrFeedList(),this.feedBuyBtn.visible=!0,e.visible=!1,e.active=!1;break;case 3:this.updateCenterBoxState(2,!0),this.priceList.array=[,1,1,1]}}updatePet(){O.list.length||O.init([]);let e=O.list[this.selectPetIndex];this.petIcon.skin=e.base.icon,this.petName.text=e.base.name,this.petDesc.text=e.base.desc,this.vitalityMax.value=e.base.vitality_max+"";let t=this.petBuyBtn.getChildByName("btn_box");t.getChildByName("icon").skin=e.base.cost.obj.icon,t.getChildByName("value").value=e.base.cost.count+"";let i,s=this.bottomBox.getChildAt(1),a=s.getChildByName("find_box"),n=s.getChildByName("back_box");for(let t=0;t<5;t++)(i=a.getChildAt(t)).visible=20*t<e.base.sensitive,i.skin=20*t+10<e.base.sensitive?"game/img_star.png":"game/img_halfstar.png",(i=n.getChildAt(t)).visible=20*t<e.base.ability,i.skin=20*t+10<e.base.ability?"game/img_star.png":"game/img_halfstar.png";e.lock?(this.petBuyBtn.visible=!0,this.goRest.visible=!1,this.goWatch.visible=!1):(P.warePetId==e.base.id?(1===O.getUnlockLen()||1001===P.warePetId?this.goRest.disabled=!0:this.goRest.disabled=!1,this.goRest.visible=!0,this.goWatch.visible=!1):(this.goWatch.visible=!0,this.goRest.visible=!1),this.petBuyBtn.visible=!1)}resetPetOrFeedList(){this.itemListSelectIndex=0,this.itemList.selectedIndex=0,this.itemList.array=this.getDataList(),this.itemList.refresh()}updateCenterBoxState(e,t){this.bottomBox.getChildAt(e).visible=t,this.bottomBox.getChildAt(e).active=t}onPriceSelect(e){}updatePriceItem(e,t){this.priceList.selectedIndex===t?e.getChildByName("bg").skin="game/img_priceselected.png":e.getChildByName("bg").skin="game/img_pricenormal.png"}},Z=class extends p{onOpened(){this.signInList.array=N.table("signIn").list,this.signInList.vScrollBarSkin=null,this.signInList.renderHandler=new Laya.Handler(this,this.updateItem),this.updateProgress()}updateProgress(){let e=P.speedUpTimes/k.ADSpeedUpTimes;e>1&&(e=1),this.signInProgressBar.width=977*e,this.signInProgressLb.text=P.signInDays+"",this.progressDesc.text=`今日签到进度（使用${P.speedUpTimes}/${k.ADSpeedUpTimes}次加速）`}updateItem(e,t){const i=e.getChildByName("bar"),s=N.table("signIn").list[t];let a=P.signInDays/s.days;a>1&&(a=1),i.width=502*a;const n=e.getChildByName("reward_box");n.getChildByName("icon").skin=s.reward.obj.icon,n.getChildByName("amount").text=`x${s.reward.count}`,e.getChildByName("sign_days").text=`签到${s.days}天`;let o="",l=e.getChildByName("get_btn");l.dataSource=s.id,s.id>P.signInId?(l.active=!0,l.visible=!1,n.y=103,o="game/img_done.png",P.signInDays>=s.days&&(P.signInId?s.id-P.signInId==1&&(o="game/img_get.png",l.visible=!0,n.y=57):s.id==N.table("signIn").list[0].id&&(o="game/img_get.png",l.visible=!0,n.y=57))):(o="game/img_received.png",l.active=!1,l.visible=!0,n.y=57),l.skin=o}onClick(t){switch(t.target.name){case"close":b.inst.close(l.views.SignInView);break;case"get_btn":const i=t.target.dataSource;R.inst.send({api:C.signInReward,data:{type:k.ApiTypeAD,signInId:i},call:s=>{P.signInId=i,this.signInList.refresh();let a=N.table("signIn").get(i).reward;_.eventGlobal.event(e.play_get_reward,{node:t.target,list:[{obj:a.obj,count:a.count,posType:a.obj.id==k.goldId?1:2}]})}})}}},ee=class extends _.gameScript{onOpened(){let e=N.table("config").get("all_speed_up_time").value;this.timeLb.text=`${Math.ceil(e/60)}分钟`,this.timesLb.text=`今日剩余${P.advertiseTimes}次`,P.advertiseTimes<=0&&(this.speedUpBtn.disabled=!0)}onClick(t){switch(t.target.name){case"close":_.view.close(l.views.SpeedUpView);break;case"speed_up":R.inst.send({api:C.landSpeedUp,data:{type:k.ApiTypeAD},call:t=>{P.speedUpTimes=t.speedUpTimes,P.advertiseTimes=t.advertiseTimes,P.speedUpTimes==k.ADSpeedUpTimes&&P.signInDays++,_.view.close(l.views.SpeedUpView),_.eventGlobal.event(e.land_speed_up)}})}}},te=class extends p{constructor(){super(...arguments),this.taskList=null}onOpened(){this.updateTaskList(),this.taskList.renderHandler=new Laya.Handler(this,this.itemRender),this.taskList.vScrollBarSkin=null}updateTaskList(){let e=T.list;e.sort((e,t)=>{let i=T.getTask(e.id),s=T.getTask(t.id);return e.id+((null==i?void 0:i.receive)?1e3:1)+((null==i?void 0:i.times)>=e.times?100:1e3)-(t.id+((null==s?void 0:s.receive)?1e3:1)+((null==s?void 0:s.times)>=t.times?100:1e3))}),this.taskList.array=e}itemRender(e,t){let i=T.list[t].base;const s=T.getTask(i.id);e.getChildByName("icon").skin=i.icon,e.getChildByName("title").text=i.title,e.getChildByName("desc").text=`${i.desc}(${((null==s?void 0:s.times)>i.times?i.times:null==s?void 0:s.times)||0}/${i.times})`;const a=e.getChildByName("reward");a.getChildByName("icon").skin=i.reward.obj.icon,a.getChildByName("amount").text="x"+i.reward.count;const n=e.getChildByName("go_run"),o={id:i.id,ok:!1};(null==s?void 0:s.receive)?(n.skin="game/img_tomarow.png",n.active=!1,n.disabled=!0):(n.active=!0,n.disabled=!1,(null==s?void 0:s.times)>=i.times?(n.skin="game/img_get.png",o.ok=!0):n.skin="game/img_done.png"),n.dataSource=o}onClick(t){switch(t.target.name){case"close":b.inst.close(l.views.TaskView);break;case"go_run":let i=t.target.dataSource;i.ok?R.inst.send({api:C.taskReward,data:{type:k.ApiTypeAD,taskId:i.id},call:s=>{const a=T.getTask(i.id);a.receive=1,i.ok=!1,Laya.timer.frameOnce(1,this,()=>{this.updateTaskList(),this.taskList.refresh()}),_.eventGlobal.event(e.play_get_reward,{node:t.target,list:[{obj:a.base.reward.obj,count:a.base.reward.count,posType:2}]})}}):this.jump(i.id)}}jump(e){switch(e){case 1001:case 1002:case 1003:case 1004:case 1005:case 1006:case 1007:break;case 1008:_.view.close(l.views.TaskView),_.view.open(l.views.WarehouseView)}}},ie=class extends _.gameScript{constructor(){super(...arguments),this.itemList=null,this.itemName=null,this.itemDesc=null,this.itemIcon=null,this.itemSellCountLb=null,this.itemSellBox=null,this.itemSellGold=null,this.itemSellDiamond=null,this.sellBtn=null,this.sellAdBtn=null,this.dataList=[],this.selectItemIndex="0,0",this.selectItemSellCount=0,this.unitPriceGold=0,this.unitPriceDiamond=0}onHdAwake(){this.itemList.renderHandler=new Laya.Handler(this,this.renderItemList),this.itemList.vScrollBarSkin=null,this.updateList(),this.updateDesc(null),this.itemSellGold.removeSelf(),this.itemSellDiamond.removeSelf(),this.itemSellCountLb.on(Laya.Event.INPUT,this,()=>{this.selectItemSellCount=Number(this.itemSellCountLb.text),this.selectItemSellCount<1&&(this.selectItemSellCount=1,this.itemSellCountLb.text="1"),this.selectItemSellCount>this.selectItemData.count&&(this.selectItemSellCount=this.selectItemData.count),this.updateSelectSellCount()})}updateList(){let e=0,t=0;U.list.forEach(i=>{this.dataList[t]||(this.dataList[t]=[]),this.dataList[t].push(i),++e>2&&(e=0,t++)}),this.itemList.array=this.dataList}renderItemList(e,t){let i=this.dataList[t];for(let s=0;s<3;s++){let a=e.getChildByName(`item_${s}`);if(i[s]){a.visible=!0,a.dataSource=`${t},${s}`;let e=a.getChildByName("icon");e.skin=i[s].base.icon,a.getChildByName("name").text=`${i[s].base.name}_${i[s].count}`,t==this.itemList.selectedIndex&&this.selectItemIndex==a.dataSource?(Laya.Tween.to(e,{y:0},150,null,null,null,!1),this.selectItemData=i[s],this.updateDesc(i[s])):56!=e.y&&Laya.Tween.to(e,{y:56},150)}else a.visible=!1}}onClick(t){switch(t.target.name){case"close":_.view.close(l.views.WarehouseView);break;case"item_0":case"item_1":case"item_2":this.selectItemIndex=t.target.dataSource,this.itemList.refresh();break;case"add":this.selectItemSellCount++,this.selectItemSellCount>this.selectItemData.count&&(this.selectItemSellCount=this.selectItemData.count),this.updateSelectSellCount();break;case"reduce":this.selectItemSellCount--,this.selectItemSellCount<1&&(this.selectItemSellCount=1),this.updateSelectSellCount();break;case"sellBtnAd":case"sellBtn":R.inst.send({api:C.warehouseSell,data:{id:this.selectItemData.base.id,amount:this.selectItemSellCount,type:"sellBtn"==t.target.name?k.ApiTypeDefault:k.ApiTypeAD},call:i=>{U.reduceAmount(this.selectItemData.base.id,this.selectItemSellCount),this.dataList=[],this.updateList(),this.itemList.refresh(),this.dataList.length||this.updateDesc(null);let s=[];this.unitPriceGold&&s.push({obj:N.table("currency").get(k.goldId),count:this.selectItemSellCount*this.unitPriceGold*("sellBtnAd"==t.target.name?2:1),posType:1}),this.unitPriceDiamond&&s.push({obj:N.table("currency").get(k.diamondId),count:this.selectItemSellCount*this.unitPriceDiamond*("sellBtnAd"==t.target.name?2:1),posType:2}),_.eventGlobal.event(e.play_get_reward,{node:this.sellBtn,list:s,callBack:()=>{}})}})}}updateDesc(e){if(!e)return void(this.itemIcon.parent.visible=!1);let t,i;this.itemIcon.parent.visible=!0,this.itemSellDiamond.removeSelf(),this.itemSellGold.removeSelf(),this.itemIcon.skin=e.base.icon,this.itemName.text=e.base.name,this.itemDesc.text=e.base.desc;for(let s=0;s<e.base.gain.length;s++)e.base.gain[s].count&&(e.base.gain[s].obj.id==k.goldId?(t=e.base.gain[s],this.itemSellGold.getChildByName("icon").skin=e.base.gain[s].obj.icon,this.itemSellBox.addChild(this.itemSellGold)):(i=e.base.gain[s],this.itemSellDiamond.getChildByName("icon").skin=e.base.gain[s].obj.icon,this.itemSellBox.addChild(this.itemSellDiamond)));this.selectItemSellCount=Math.ceil(e.count/2),this.unitPriceGold=(null==t?void 0:t.count)||0,this.unitPriceDiamond=(null==i?void 0:i.count)||0,this.updateSelectSellCount()}updateSelectSellCount(){this.itemSellCountLb.text=this.selectItemSellCount+"",this.itemSellGold.getChildByName("price").text=this.selectItemSellCount*this.unitPriceGold+"",this.itemSellDiamond.getChildByName("price").text=this.selectItemSellCount*this.unitPriceDiamond+""}},se=class{constructor(){}static init(){var e=Laya.ClassUtils.regClass;e("components/Button.ts",L),e("components/ViewShowAni.ts",g),e("view/AddLandView.ts",M),e("view/FieldLevelUpView.ts",E),e("view/FriendsDescView.ts",G),e("view/FriendsRewardView.ts",F),e("view/FriendsView.ts",j),e("view/HintView.ts",$),e("view/LoginView.ts",J),e("view/MailView.ts",W),e("view/MainView.ts",Y),e("components/FieldComponent.ts",X),e("view/OrderView.ts",K),e("view/SettingView.ts",q),e("view/ShopView.ts",Q),e("view/SignInView.ts",Z),e("view/SpeedUpView.ts",ee),e("view/TaskView.ts",te),e("view/WarehouseView.ts",ie)}};se.width=1080,se.height=1920,se.scaleMode="fixedwidth",se.screenMode="none",se.alignV="middle",se.alignH="center",se.startScene="scenes/views/MainView.scene",se.sceneRoot="",se.debug=!1,se.stat=!0,se.physicsDebug=!1,se.exportSceneToJson=!0,se.init();var ae=class{constructor(){window.Laya3D?Laya3D.init(se.width,se.height):Laya.init(se.width,se.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=se.scaleMode,Laya.stage.screenMode=se.screenMode,Laya.stage.alignV=se.alignV,Laya.stage.alignH=se.alignH,Laya.URL.exportSceneToJson=se.exportSceneToJson,(se.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),se.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),se.stat&&Laya.Stat.show(),Laya.alertGlobalError(!0),Laya.ResourceVersion.enable("version-19b23f6d31.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}onVersionLoaded(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))}onConfigLoaded(){return o(this,null,function*(){Config.customRenderID=[],S.init(),R.inst.init(k.baseUrl),_.eventGlobal.on(e.login_game,this,this.loginGame),Laya.SoundManager.useAudioMusic=!1,yield new Promise(e=>{b.inst.open(l.views.LoginView,{showLoad:!1,parm:{call:t=>{e(null),this.initGameData(t)}},complete:e=>{}})}),this.loginGame()})}loginGame(){Laya.loader.load(l.scenes,Laya.Handler.create(this,()=>{console.log("ok"),Laya.timer.frameOnce(1,this,()=>{Laya.View.hideLoadingPage(1e3),b.inst.open(se.startScene)})}),Laya.Handler.create(this,t=>{h.event(e.load_progress,t)},null,!1))}initGameData(e){}};ae.customRenderID=[],new ae})();